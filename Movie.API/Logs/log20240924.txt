2024-09-24 00:46:17.654 +07:00 [INF] User profile is available. Using 'C:\Users\phuoc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-24 00:46:17.767 +07:00 [INF] Now listening on: https://localhost:7039
2024-09-24 00:46:17.768 +07:00 [INF] Now listening on: http://localhost:5203
2024-09-24 00:46:17.770 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-24 00:46:17.770 +07:00 [INF] Hosting environment: Development
2024-09-24 00:46:17.771 +07:00 [INF] Content root path: D:\Workplace\MoviesApp\movie-api\Movie.API
2024-09-24 00:46:18.624 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/swagger/index.html - null null
2024-09-24 00:46:18.878 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/swagger/index.html - 200 null text/html;charset=utf-8 255.6263ms
2024-09-24 00:46:18.893 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/_vs/browserLink - null null
2024-09-24 00:46:18.893 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/_framework/aspnetcore-browser-refresh.js - null null
2024-09-24 00:46:18.896 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/_framework/aspnetcore-browser-refresh.js - 200 13754 application/javascript; charset=utf-8 3.6369ms
2024-09-24 00:46:18.930 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.6888ms
2024-09-24 00:46:19.457 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/swagger/v1/swagger.json - null null
2024-09-24 00:46:19.679 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 222.2376ms
2024-09-24 00:46:47.893 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc/admin - null 0
2024-09-24 00:46:47.931 +07:00 [INF] CORS policy execution successful.
2024-09-24 00:46:47.934 +07:00 [INF] Executing endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:46:47.952 +07:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Movie.API.Responses.Response] ChangeRole(System.String, System.String) on controller Movie.API.Controllers.UserController (Movie.API).
2024-09-24 00:46:49.452 +07:00 [INF] Executed DbCommand (88ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Avatar], [u].[ConcurrencyStamp], [u].[DisplayName], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2024-09-24 00:46:49.608 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:46:49.653 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:46:49.681 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2024-09-24 00:46:49.697 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2024-09-24 00:46:49.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Avatar], [u].[ConcurrencyStamp], [u].[DisplayName], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2024-09-24 00:46:49.973 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p21='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [UserRoles]
OUTPUT 1
WHERE [RoleId] = @p0 AND [UserId] = @p1;
UPDATE [Users] SET [AccessFailedCount] = @p2, [Avatar] = @p3, [ConcurrencyStamp] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiry] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2024-09-24 00:46:50.000 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2024-09-24 00:46:50.035 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2024-09-24 00:46:50.041 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2024-09-24 00:46:50.058 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[Avatar], [u].[ConcurrencyStamp], [u].[DisplayName], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2024-09-24 00:46:50.095 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p20='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p21='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [Avatar] = @p3, [ConcurrencyStamp] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiry] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2024-09-24 00:46:50.121 +07:00 [INF] Executing ObjectResult, writing value of type 'Movie.API.Responses.Response'.
2024-09-24 00:46:50.149 +07:00 [INF] Executed action Movie.API.Controllers.UserController.ChangeRole (Movie.API) in 2189.415ms
2024-09-24 00:46:50.150 +07:00 [INF] Executed endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:46:50.161 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc/admin - 200 null application/json; charset=utf-8 2267.4875ms
2024-09-24 00:46:59.916 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/api/user/all?pageNumber=1&pageSize=10 - null null
2024-09-24 00:46:59.919 +07:00 [INF] Executing endpoint 'Movie.API.Controllers.UserController.GetUsers (Movie.API)'
2024-09-24 00:46:59.924 +07:00 [INF] Route matched with {action = "GetUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Movie.API.Responses.Response] GetUsers(Int32, Int32) on controller Movie.API.Controllers.UserController (Movie.API).
2024-09-24 00:46:59.994 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-09-24 00:46:59.995 +07:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-09-24 00:47:00.002 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[Avatar], [u].[ConcurrencyStamp], [u].[DisplayName], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiry], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
ORDER BY (SELECT 1)
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2024-09-24 00:47:00.045 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
2024-09-24 00:47:00.048 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.049 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.197 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.198 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.199 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.200 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.201 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.202 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.202 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.203 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.204 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.205 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.206 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.207 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.208 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.210 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.211 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[UserId], [u].[RoleId]
FROM [UserRoles] AS [u]
WHERE [u].[UserId] = @__user_Id_0
2024-09-24 00:47:00.212 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2024-09-24 00:47:00.219 +07:00 [INF] Executing ObjectResult, writing value of type 'Movie.API.Responses.DataRespone'.
2024-09-24 00:47:00.224 +07:00 [INF] Executed action Movie.API.Controllers.UserController.GetUsers (Movie.API) in 300.6624ms
2024-09-24 00:47:00.225 +07:00 [INF] Executed endpoint 'Movie.API.Controllers.UserController.GetUsers (Movie.API)'
2024-09-24 00:47:00.225 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/api/user/all?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 309.3569ms
2024-09-24 00:52:42.098 +07:00 [INF] User profile is available. Using 'C:\Users\phuoc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-24 00:52:42.229 +07:00 [INF] Now listening on: https://localhost:7039
2024-09-24 00:52:42.229 +07:00 [INF] Now listening on: http://localhost:5203
2024-09-24 00:52:42.231 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-24 00:52:42.232 +07:00 [INF] Hosting environment: Development
2024-09-24 00:52:42.232 +07:00 [INF] Content root path: D:\Workplace\MoviesApp\movie-api\Movie.API
2024-09-24 00:52:42.659 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/swagger/index.html - null null
2024-09-24 00:52:42.810 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/swagger/index.html - 200 null text/html;charset=utf-8 151.8053ms
2024-09-24 00:52:42.824 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/_framework/aspnetcore-browser-refresh.js - null null
2024-09-24 00:52:42.824 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/_vs/browserLink - null null
2024-09-24 00:52:42.827 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/_framework/aspnetcore-browser-refresh.js - 200 13754 application/javascript; charset=utf-8 3.4287ms
2024-09-24 00:52:42.850 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.6773ms
2024-09-24 00:52:43.110 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/swagger/v1/swagger.json - null null
2024-09-24 00:52:43.309 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 198.5922ms
2024-09-24 00:52:57.739 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc/ádfadsf - null 0
2024-09-24 00:52:57.786 +07:00 [INF] CORS policy execution successful.
2024-09-24 00:52:57.789 +07:00 [INF] Executing endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:52:57.808 +07:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeRole(System.String, System.String) on controller Movie.API.Controllers.UserController (Movie.API).
2024-09-24 00:52:59.035 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Movie.API.Infrastructure.Data.MovieDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-24 00:52:59.042 +07:00 [INF] Executed action Movie.API.Controllers.UserController.ChangeRole (Movie.API) in 1228.8259ms
2024-09-24 00:52:59.045 +07:00 [INF] Executed endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:52:59.072 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Movie.API.Infrastructure.Repositories.UserRepository.ChangeRoleAsync(String userName, String roleName) in D:\Workplace\MoviesApp\movie-api\Movie.API\Infrastructure\Repositories\UserRepository.cs:line 27
   at Movie.API.Features.Users.ChangRoleCommandHandler.Handle(ChangeRoleCommand request, CancellationToken cancellationToken) in D:\Workplace\MoviesApp\movie-api\Movie.API\Features\Users\ChangRoleCommandHandler.cs:line 30
   at Movie.API.Controllers.UserController.ChangeRole(String username, String role) in D:\Workplace\MoviesApp\movie-api\Movie.API\Controllers\UserController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-24 00:52:59.092 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc/ádfadsf - 500 null text/plain; charset=utf-8 1352.7686ms
2024-09-24 00:52:59.096 +07:00 [ERR] An error occurred using the connection to database 'MovieDB' on server '.\SQLEXPRESS'.
2024-09-24 00:53:11.829 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc/addd - null 0
2024-09-24 00:53:11.831 +07:00 [INF] CORS policy execution successful.
2024-09-24 00:53:11.832 +07:00 [INF] Executing endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:53:11.832 +07:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeRole(System.String, System.String) on controller Movie.API.Controllers.UserController (Movie.API).
2024-09-24 00:53:11.933 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Movie.API.Infrastructure.Data.MovieDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-24 00:53:11.934 +07:00 [INF] Executed action Movie.API.Controllers.UserController.ChangeRole (Movie.API) in 101.7118ms
2024-09-24 00:53:11.934 +07:00 [INF] Executed endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:53:11.936 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Movie.API.Infrastructure.Repositories.UserRepository.ChangeRoleAsync(String userName, String roleName) in D:\Workplace\MoviesApp\movie-api\Movie.API\Infrastructure\Repositories\UserRepository.cs:line 27
   at Movie.API.Features.Users.ChangRoleCommandHandler.Handle(ChangeRoleCommand request, CancellationToken cancellationToken) in D:\Workplace\MoviesApp\movie-api\Movie.API\Features\Users\ChangRoleCommandHandler.cs:line 30
   at Movie.API.Controllers.UserController.ChangeRole(String username, String role) in D:\Workplace\MoviesApp\movie-api\Movie.API\Controllers\UserController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-24 00:53:11.943 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc/addd - 500 null text/plain; charset=utf-8 114.2284ms
2024-09-24 00:53:11.957 +07:00 [ERR] Failed executing DbCommand (37ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2024-09-24 00:53:11.965 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Movie.API.Infrastructure.Data.MovieDbContext'.
System.InvalidOperationException: Invalid operation. The connection is closed.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Invalid operation. The connection is closed.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-24 00:53:58.097 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc1/customer - null 0
2024-09-24 00:53:58.098 +07:00 [INF] CORS policy execution successful.
2024-09-24 00:53:58.098 +07:00 [INF] Executing endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:53:58.098 +07:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeRole(System.String, System.String) on controller Movie.API.Controllers.UserController (Movie.API).
2024-09-24 00:53:58.121 +07:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Movie.API.Infrastructure.Data.MovieDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-09-24 00:53:58.122 +07:00 [INF] Executed action Movie.API.Controllers.UserController.ChangeRole (Movie.API) in 23.4128ms
2024-09-24 00:53:58.122 +07:00 [INF] Executed endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:53:58.124 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at Movie.API.Infrastructure.Repositories.UserRepository.ChangeRoleAsync(String userName, String roleName) in D:\Workplace\MoviesApp\movie-api\Movie.API\Infrastructure\Repositories\UserRepository.cs:line 27
   at Movie.API.Features.Users.ChangRoleCommandHandler.Handle(ChangeRoleCommand request, CancellationToken cancellationToken) in D:\Workplace\MoviesApp\movie-api\Movie.API\Features\Users\ChangRoleCommandHandler.cs:line 30
   at Movie.API.Controllers.UserController.ChangeRole(String username, String role) in D:\Workplace\MoviesApp\movie-api\Movie.API\Controllers\UserController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-09-24 00:53:58.126 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc1/customer - 500 null text/plain; charset=utf-8 28.1748ms
2024-09-24 00:53:58.126 +07:00 [ERR] An error occurred using the connection to database 'MovieDB' on server '.\SQLEXPRESS'.
2024-09-24 00:55:45.965 +07:00 [INF] User profile is available. Using 'C:\Users\phuoc\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-09-24 00:55:46.194 +07:00 [INF] Now listening on: https://localhost:7039
2024-09-24 00:55:46.194 +07:00 [INF] Now listening on: http://localhost:5203
2024-09-24 00:55:46.198 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2024-09-24 00:55:46.199 +07:00 [INF] Hosting environment: Development
2024-09-24 00:55:46.200 +07:00 [INF] Content root path: D:\Workplace\MoviesApp\movie-api\Movie.API
2024-09-24 00:55:46.654 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/swagger/index.html - null null
2024-09-24 00:55:46.876 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/swagger/index.html - 200 null text/html;charset=utf-8 223.5894ms
2024-09-24 00:55:47.152 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/_framework/aspnetcore-browser-refresh.js - null null
2024-09-24 00:55:47.152 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/_vs/browserLink - null null
2024-09-24 00:55:47.156 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/_framework/aspnetcore-browser-refresh.js - 200 13754 application/javascript; charset=utf-8 4.3783ms
2024-09-24 00:55:47.199 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.8104ms
2024-09-24 00:55:47.568 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7039/swagger/v1/swagger.json - null null
2024-09-24 00:55:47.782 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7039/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 213.7041ms
2024-09-24 00:55:58.538 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc/add - null 0
2024-09-24 00:55:58.567 +07:00 [INF] CORS policy execution successful.
2024-09-24 00:55:58.570 +07:00 [INF] Executing endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:55:58.587 +07:00 [INF] Route matched with {action = "ChangeRole", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeRole(System.String, System.String) on controller Movie.API.Controllers.UserController (Movie.API).
2024-09-24 00:56:00.046 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2024-09-24 00:56:00.076 +07:00 [INF] Executing NotFoundObjectResult, writing value of type 'Movie.API.Responses.Response'.
2024-09-24 00:56:00.094 +07:00 [INF] Executed action Movie.API.Controllers.UserController.ChangeRole (Movie.API) in 1502.8068ms
2024-09-24 00:56:00.094 +07:00 [INF] Executed endpoint 'Movie.API.Controllers.UserController.ChangeRole (Movie.API)'
2024-09-24 00:56:00.101 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7039/api/user/changerole/phuoc/add - 404 null application/json; charset=utf-8 1563.2199ms
